const fs = require('fs');

function classify(name) {
  const n = name.toLowerCase();
  if (/насос/.test(n))                                          return { category: 'pumps',       image: '/products/pump.jpg' };
  if (/воздуходувк/.test(n))                                    return { category: 'blowers',     image: '/products/blower.jpg' };
  if (/нагреватель|теплообменник|солярий/.test(n))              return { category: 'heaters',     image: '/products/heater.jpg' };
  if (/фильтр|песок|вентиль/.test(n))                          return { category: 'filters',     image: '/products/filter.jpg' };
  if (/озонатор/.test(n))                                       return { category: 'ozone',       image: '/products/ozone.jpg' };
  if (/светильник|прожектор|лампа|трансформатор/.test(n))      return { category: 'lighting',    image: '/products/lighting.jpg' };
  if (/водопад/.test(n))                                        return { category: 'waterfalls',  image: '/products/waterfall.jpg' };
  if (/лайнер/.test(n))                                         return { category: 'liner',       image: '/products/liner.jpg' };
  if (/хлор|средство|тестер|химия/.test(n))                     return { category: 'chemistry',   image: '/products/chemistry.jpg' };
  if (/уголок|муфта|тройник|отводка|сгон|заглушка|клей|очиститель|форсунка закладн|возвратная/.test(n)) return { category: 'fittings', image: '/products/fittings.jpg' };
  return { category: 'accessories', image: '/products/accessories.jpg' };
}

const raw = [
  ['Насос Espa Silen I 33 0,45 кВт  от 2м3 до 10м3 ,Н 1-10м', 'шт', 36500],
  ['Насос Espa Silen I 50 0,65 кВт от 2м3 до 4м3 ,Н 1-14м', 'шт', 38700],
  ['Насос Espa Silen S 75 1,2кВт от 9м3 до 18м3 ,Н 5-13м', 'шт', 48400],
  ['Насос Espa Silen S 100 1,3кВт от 9м3 до 20м3 ,Н 5-15м', 'шт', 48400],
  ['Ящик коммутации, управления, защита Hager', 'шт', 15900],
  ['Щиток пластик, белый', 'шт', 4000],
  ['Насос JCP10-50 0,37 кВт 220V-240V, 1.5" port, от 3м3 до 10м3 h 1-10м', 'шт', 13000],
  ['Насос JCP10-75 0,55 кВт 220V-240V, 1.5" port, от 3м3 до 13м3 h 1-10м', 'шт', 14600],
  ['Насос JCP10-100 0,75кВт 220V-240V, 1.5" port от 3м3 до 15м3 h 1-10м', 'шт', 15000],
  ['Насос JCP10-120 0,9 кВт 220V-240V от 3м3 до 18м3 h 1-12м', 'шт', 16400],
  ['Насос JCP10-150 1,1 кВт 220V-240V, 2" port от 4м3 до 24м3 h 6-15', 'шт', 23100],
  ['Насос JCP10-200 1,5 кВт 220V-240V, 2" port от 4м3 до 30м3 h 8-17м', 'шт', 25100],
  ['Насос JCP10-300 2,2 кВт 220V-240V, 2" port от 4м3 до 36м3 h 3-18м3', 'шт', 30300],
  ['Насос JSP3-400 4HP 380V, 2.5"/3"/4" port, 3кВт, от 10м3 до 75м3, h 7-13м', 'шт', 37000],
  ['Насос JSP3-550 5.5HP 380V, 2.5"/3"/4" port, 4кВт, от 20м3 до 84м3 h 8-16м', 'шт', 38000],
  ['Воздуходувка алюминиевая Aluminium alloy Air Blower 1,3 кВт', 'шт', 23600],
  ['Воздуходувка алюминиевая Aluminium alloy Air Blower 1,5 кВт', 'шт', 28000],
  ['Воздуходувка JAB2-700 700W 220V, 0.8m³/Min, тихая, двойная скорость', 'шт', 9200],
  ['Воздуходувка JAB2-900 900W 220V, 0.8m³/Min, тихая, двойная скорость', 'шт', 9800],
  ['Нагреватель Pahlen 6 кВт', 'шт', 40000],
  ['Нагреватель Pahlen 9 кВт', 'шт', 43000],
  ['Нагреватель Pahlen 12 кВт', 'шт', 45000],
  ['Нагреватель Pahlen 15 кВт', 'шт', 48000],
  ['Нагреватель Pahlen 18 кВт', 'шт', 50000],
  ['Фильтр песчаный боковой JFT3-400 Ø400мм, 6m³/h, 1.5"', 'шт', 16100],
  ['Фильтр песчаный боковой JFT3-500 Ø500мм, 10m³/h, 1.5"', 'шт', 21400],
  ['Фильтр песчаный боковой JFT3-650 Ø650мм, 17m³/h, 1.5"', 'шт', 25000],
  ['Фильтр песчаный боковой JFT3-750 Ø750мм, 22m³/h, 2"', 'шт', 34500],
  ['Фильтр песчаный боковой JFT3-900 Ø900мм, 30m³/h, 2"', 'шт', 42900],
  ['Кварцевый песок 0,4мм-0,9мм, мешок 25кг', 'шт', 55],
  ['Кварцевый песок 1мм-3мм, мешок 25кг', 'шт', 55],
  ['Вентиль для фильтра Top mount valve JFT3-V15', 'шт', 9000],
  ['Вентиль для фильтра Top mount valve JFT3-V20', 'шт', 9800],
  ['Озонатор бассейна JSC1 PLUS-8 8g/h, для 35m³', 'шт', 35000],
  ['Озонатор бассейна JSC1 PLUS-12 12g/h, для 50m³', 'шт', 37800],
  ['Озонатор бассейна JSC1 PLUS-20 20g/h, для 85m³', 'шт', 46400],
  ['Озонатор бассейна JSC3-50 50g/h, 2 в 1 хлоратор+свет (солнечный)', 'шт', 88500],
  ['Солярий 3 кВт', 'шт', 112400],
  ['Теплообменник JHE135 40kw 304', 'шт', 9400],
  ['Теплообменник JHE260 75kw 304', 'шт', 12200],
  ['Теплообменник JHE400 120kw 304', 'шт', 16300],
  ['Светильник подводный нерж. JLL1-18W 18w DN23CM blue/white/rgb', 'шт', 4500],
  ['Светильник подводный пластик JLL12-18W ABS DN23CM 18w', 'шт', 4000],
  ['Светильник врезаемый JLL32-290 Recessed 25w RGB', 'шт', 8000],
  ['Прожектор для бассейна JPAR56-25W LED', 'шт', 3600],
  ['Прожектор для бассейна JPAR56-300W галоген', 'шт', 2700],
  ['Термометр большой пластмассовый', 'шт', 1200],
  ['Термометр большой металлический', 'шт', 2300],
  ['Сачок поверхностный', 'шт', 500],
  ['Сачок поверхностный с ручкой', 'шт', 1400],
  ['Щетка донная', 'шт', 600],
  ['Пылесос для бассейна', 'шт', 300],
  ['Штанга нижнего всасывания для бассейна', 'шт', 1700],
  ['Переливная решетка широкая', 'шт', 2000],
  ['Переливная решетка узкая', 'шт', 1700],
  ['Шланг для пылесоса JCT7-7.5M EVA 1.5"x25\' (38mm x 7.5m)', 'шт', 2300],
  ['Шланг для пылесоса JCT7-9M EVA 1.5"x30\' (38mm x 9m)', 'шт', 2600],
  ['Шланг для пылесоса JCT7-12M EVA 1.5"x40\' (38mm x 12m)', 'шт', 3500],
  ['Шланг для пылесоса JCT7-15M EVA 1.5"x50\' (38mm x 15m)', 'шт', 4300],
  ['Телескопическая штанга JCT8-480 2x240cm 1.1mm (Blue/Silver)', 'шт', 2000],
  ['Телескопическая штанга JCT8-900 3x300cm 1.1mm (Blue/Silver)', 'шт', 3700],
  ['Тестер CL/PH', 'шт', 500],
  ['Средство очистки боковое соединение', 'шт', 2000],
  ['Средство соль/таблетка/гранулат', 'шт', 800],
  ['Средство применения', 'шт', 600],
  ['Линия 25мм', 'шт', 1600],
  ['Лестница нерж. 3 ступени JL1-3S SS316 1.0mm', 'шт', 12000],
  ['Лестница нерж. 4 ступени JL1-4S SS316 1.0mm', 'шт', 13500],
  ['Лестница нерж. 5 ступеней JL1-5S SS316 1.0mm', 'шт', 15000],
  ['Прожектор большой с лампой', 'шт', 650],
  ['Лампа PHILIPS с лампой', 'шт', 2500],
  ['Прожектор большой', 'шт', 2500],
  ['Скиммерка обрезная', 'шт', 500],
  ['Прожектор малый', 'шт', 700],
  ['Скиммер бассейна с лайнером JPA29', 'шт', 3900],
  ['Скиммер бассейна с лайнером JPA32 для Liner Pool', 'шт', 5100],
  ['Скиммер большой с лайнером JPA33 для Liner Pool', 'шт', 7000],
  ['Скиммер большой с лайнером JPA111 38x38x43cm liner pool', 'шт', 5500],
  ['Переливная решетка PP JPA42-20 20cm', 'м.п', 900],
  ['Переливная решетка PP PA42-25 25cm', 'м.п', 1100],
  ['Водопад бассейна 600мм JPA64-600 SS304 H:1100mm W:600mm', 'шт', 54300],
  ['Водопад JPA66 SS304 H:920mm W:500mm', 'шт', 50600],
  ['Водопад JPA68 SS304 H:600mm W:400mm', 'шт', 24400],
  ['Водопад акриловый с RGB JPA99-650 H650xW300 12W DC12V', 'шт', 40500],
  ['Донная воздуходувка Square bubble plate JPA69 Ø300mm', 'шт', 4200],
  ['Донная воздуходувка Square floating JPA70 350x350mm', 'шт', 7200],
  ['Лайнер Pool Liner 1.5mm Adriatic blue 2м x 25м', 'м', 1400],
  ['Лайнер Pool Liner 1.5mm ростция 2м x 25м', 'м', 1600],
  ['Лайнер Pool Liner 1.5mm голубой цветной 2м x 25м', 'м', 2000],
  ['Возвратная', 'м2', 200],
  ['Закладные форсунка три или штука', 'шт', 700],
  ['Гидромассажная форсунка, сопло ПВХ', 'шт', 6700],
  ['Уголок 45° 50мм', 'шт', 200],
  ['Уголок 45° 63мм', 'шт', 450],
  ['Уголок 45° 75мм', 'шт', 270],
  ['Уголок 90° 50мм', 'шт', 200],
  ['Уголок 90° 63мм', 'шт', 450],
  ['Уголок 90° 75мм', 'шт', 600],
  ['Муфта 50мм', 'шт', 150],
  ['Муфта 63мм', 'шт', 200],
  ['Муфта 75мм', 'шт', 400],
  ['Отводка 50мм', 'шт', 270],
  ['Отводка 63мм', 'шт', 530],
  ['Отводка 75мм', 'шт', 640],
  ['Сгон 50мм 1,2" внутр. резьба', 'шт', 200],
  ['Сгон 50мм 1,2" наруж. резьба', 'шт', 200],
  ['Сгон 63мм 2" внутр. резьба', 'шт', 250],
  ['Сгон 63мм 2" наруж. резьба', 'шт', 250],
  ['Крамка 50мм x 1,5" наруж. резьба', 'шт', 1000],
  ['Крамка 63мм x 2" наруж. резьба', 'шт', 2600],
  ['Заглушка трубы 50мм', 'шт', 2350],
  ['Заглушка трубы 63мм', 'шт', 4050],
  ['Заглушка трубы 75мм', 'шт', 7660],
  ['Клей для труб 118мл', 'шт', 800],
  ['Клей для труб 237мл', 'шт', 1000],
  ['Клей для труб 473мл', 'шт', 2000],
  ['Клей для труб 1л', 'шт', 2500],
  ['Очиститель трубок 50мм', 'шт', 1650],
  ['Очиститель трубок 63мм', 'шт', 2260],
];

const products = raw.map(([name, unit, price], i) => {
  const { category, image } = classify(name);
  const slug = name.toLowerCase().replace(/[^a-zа-яёА-ЯЁ0-9]+/gi, '-').replace(/^-+|-+$/g, '');
  return {
    id: i + 1,
    slug,
    name,
    category,
    description: name,
    fullDescription: name,
    price,
    specs: unit,
    article: '',
    brand: '',
    unit,
    inStock: true,
    characteristics: {},
    images: [image],
  };
});

const outPath = require('path').join(__dirname, 'app', 'public', 'all-products.json');
require('fs').writeFileSync(outPath, JSON.stringify(products, null, 2), 'utf8');

const counts = {};
for (const p of products) counts[p.category] = (counts[p.category] || 0) + 1;
console.log(`Записано: ${products.length} товаров`);
for (const [cat, cnt] of Object.entries(counts)) console.log(`  ${cat} - ${cnt}`);
